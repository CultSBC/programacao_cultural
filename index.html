<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema de Gestão de Programação Cultural</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background:#f3f4f6;
    margin:0;
    padding:0;
}
.modal {
    max-width:1200px;
    margin:20px auto;
    background:#fff;
    border-radius:8px;
    padding:20px;
}
.section {
    border:1px solid #ddd;
    margin-bottom:20px;
    border-radius:6px;
}
.section-header {
    background:#f0f0f0;
    padding:10px 15px;
    font-weight:bold;
}
.section-body {
    padding:15px;
}
.form-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
    gap:15px;
}
.form-group {
    display:flex;
    flex-direction:column;
}
label {
    font-size:13px;
    margin-bottom:4px;
}
input, select, textarea {
    padding:8px;
    border:1px solid #ccc;
    border-radius:4px;
}
textarea {
    resize:vertical;
}
.readonly input,
.readonly select,
.readonly textarea {
    background:#f9fafb;
    pointer-events:none;
}
button {
    padding:10px 20px;
    background:#2563eb;
    color:#fff;
    border:none;
    border-radius:4px;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="modal">

<h2>Cadastro de Evento</h2>

<!-- SEÇÃO ESTRUTURAL -->
<div class="section section-estrutural">
<div class="section-header">Dados do Evento</div>
<div class="section-body form-grid">

<div class="form-group">
<label>Nome da Proposta</label>
<input name="nome_proposta">
</div>

<div class="form-group">
<label>Data do Evento</label>
<input type="date" name="data_evento">
</div>

<div class="form-group">
<label>Data de Cadastro</label>
<input type="date" name="data_cadastro">
</div>

<div class="form-group">
<label>Origem do Evento</label>
<select name="origem_evento">
<option value="">Selecione</option>
<option>Secretaria de Governo</option>
<option>Secretaria de Cultura</option>
<option>Outras Secretarias</option>
<option>PNAB 2024</option>
<option>LPG 2022</option>
<option>PROAC</option>
<option>Cessão de Espaço</option>
<option>Particular (Preço Público)</option>
<option>Edital de Ocupação</option>
</select>
</div>

<div class="form-group">
<label>Local</label>
<input name="local">
</div>

<div class="form-group">
<label>Início</label>
<input type="time" name="inicio">
</div>

<div class="form-group">
<label>Fim</label>
<input type="time" name="fim">
</div>

<div class="form-group">
<label>Status</label>
<select name="status_evento">
<option>Em análise</option>
<option>Aprovado</option>
<option>Concluído</option>
<option>Cancelado</option>
</select>
</div>

<div class="form-group">
<label>Público Alcançado</label>
<input type="number" name="publico">
</div>

<div class="form-group" style="grid-column:1/-1">
<label>Descrição</label>
<textarea name="descricao"></textarea>
</div>

</div>
</div>

<!-- DIVULGAÇÃO -->
<div class="section section-divulgacao">
<div class="section-header">Divulgação</div>
<div class="section-body form-grid">

<div class="form-group">
<label>Recebimento</label>
<input type="date" name="recebimento_divulgacao">
</div>

<div class="form-group">
<label>Impressão</label>
<input type="date" name="impressao_divulgacao">
</div>

<div class="form-group">
<label>Publicação</label>
<input type="date" name="publicacao_divulgacao">
</div>

<div class="form-group">
<label>Link</label>
<input type="url" name="link_divulgacao">
</div>

</div>
</div>

<!-- CONTRATOS -->
<div class="section section-contratos">
<div class="section-header">Contratos</div>
<div class="section-body form-grid">

<div class="form-group">
<label>Recebimento</label>
<input type="date" name="recebimento_contratos">
</div>

<div class="form-group">
<label>Empenho</label>
<input type="date" name="empenho_contratos">
</div>

<div class="form-group">
<label>Pagamento</label>
<input type="date" name="pagamento_contratos">
</div>

</div>
</div>

<!-- APOIO -->
<div class="section section-apoio">
<div class="section-header">Apoio</div>
<div class="section-body form-grid">

<div class="form-group">
<label>Nº Ficha de Apoio</label>
<input name="apoio_ficha_numero">
</div>

<div class="form-group">
<label>Data Recebimento</label>
<input type="date" name="apoio_ficha_data">
</div>

<div class="form-group" style="grid-column:1/-1">
<label>Observações</label>
<textarea name="apoio_observacoes"></textarea>
</div>

</div>
</div>

<button onclick="salvar()">Salvar Evento</button>

</div>

<script>
const API_URL = "COLE_AQUI_A_URL_PUBLICADA_DO_APPS_SCRIPT";
const PERFIL_USUARIO = "NORMAL";

function aplicarPermissoes() {
    if (PERFIL_USUARIO === "NORMAL") {
        document.querySelectorAll('.section-divulgacao, .section-contratos, .section-apoio')
            .forEach(sec => sec.classList.add('readonly'));
    }
}

async function salvar() {
    const dados = {};
    document.querySelectorAll('[name]').forEach(el => {
        dados[el.name] = el.type === 'checkbox' ? el.checked : el.value;
    });

    await fetch(API_URL, {
        method: 'POST',
        body: JSON.stringify(dados),
        headers: { 'Content-Type': 'application/json' }
    });

    alert('Evento salvo com sucesso.');
}

document.addEventListener('DOMContentLoaded', aplicarPermissoes);
</script>

</body>
</html>
